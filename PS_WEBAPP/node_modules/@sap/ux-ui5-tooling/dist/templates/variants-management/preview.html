<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{appTitle}}</title>

	<script>
		window["sap-ushell-config"] = {
			defaultRenderer: "fiori2",
			applications: {
				"preview-app": {
					additionalInformation: "SAPUI5.Component=<%- component %>",
					applicationType: "URL",
					url: "./",
					navigationMode: "embedded"
				}
			}
		};
	</script>

	<script src="/test-resources/sap/ushell/bootstrap/sandbox.js"></script>
	<script
			src="/resources/sap-ui-core.js"
			data-sap-ui-libs="<%- libs %>"
			data-sap-ui-async="true"
			data-sap-ui-preload="async"
			data-sap-ui-compatVersion="edge"
			data-sap-ui-theme="<%- ui5Theme %>"
			data-sap-ui-flexibilityServices='[{"applyConnector": "<%- component.replace(/\./g, '/') %>/WorkspaceConnector", "writeConnector": "<%- component.replace(/\./g, '/') %>/WorkspaceConnector", "custom": true}]'
	data-sap-ui-frameOptions="allow"
	data-sap-ui-bindingSyntax="complex"
	></script><% if (reuseLibs) { %>
	<script src="../utils/locate-reuse-libs.js"
		data-sap-ui-manifest-uri="../manifest.json">
	</script><% } %><% if (rtaMode) { %>
	<script>
		sap.ui.getCore().attachInit(function() {
			sap.ushell.Container.attachRendererCreatedEvent(function() {
				sap.ushell.Container.getServiceAsync('AppLifeCycle').then((serviceInstance) => {
					serviceInstance.attachAppLoaded((event) => {
						var oView = event.getParameter('componentInstance');
						sap.ui.require(["sap/ui/rta/api/startAdaptation"], function (startAdaptation) {
							var options = {
								rootControl: oView,
								validateAppVersion: false,
								flexSettings: {
									layer: 'VENDOR'
								}
							};
							startAdaptation(options);
						});
					})
				});
			});<% if (!reuseLibs) { %>
			sap.ushell.Container.createRenderer().placeAt("content");<% } %>
		});
	</script><% } %>
</head>
<body class="sapUiBody" id="content"></body>
</html>
