sap.ui.define(["sap/m/Dialog","epta/ps/model/formatter","sap/ui/model/json/JSONModel","sap/m/Button","sap/m/ToggleButton","sap/m/Title","sap/m/Toolbar","sap/m/ToolbarSpacer"],function(t,e,o,n,a,i,s,r){"use strict";return t.extend("epta.ps.ui5.m.Dialog",{metadata:{properties:{showPropagateButton:{type:"boolean",defaultValue:true},showSaveButton:{type:"boolean",defaultValue:true},showClearButton:{type:"boolean",defaultValue:false}},events:{save:{},clear:{}}},_bPropagate:false,init:function(){t.prototype.init.apply(this);var e=this;this.attachAfterOpen(function(){e.rerender()});this.attachAfterClose(function(){});this.setCustomHeader(new s({content:[new r,new i({text:e.getTitle(),level:"H1"}),new r,new n({icon:"sap-icon://decline",press:function(){e._close()}})]}));this._oPropagateButton=new a({text:"{i18n>ui5SaveAll}",visible:this.getShowPropagateButton(),press:function(t){e._bPropagate=t.getSource().getPressed()}});this.addButton(this._oPropagateButton);this._oClearButton=new n({text:"{i18n>ui5Clear}",visible:this.getShowClearButton(),press:function(){e._clear()}});this.addButton(this._oClearButton);this._oSaveButton=new n({text:"{i18n>ui5Save}",press:function(){e._save()},visible:this.getShowSaveButton()});this.addButton(this._oSaveButton)},onBeforeRendering:function(){t.prototype.onBeforeRendering.apply(this);this._oPropagateButton.setVisible(this.getShowPropagateButton());this._oPropagateButton.setPressed(this._bPropagate);this._oSaveButton.setVisible(this.getShowSaveButton());this._oClearButton.setVisible(this.getShowClearButton())},doClose:function(){this._close()},toPropagate:function(){return this._bPropagate},_save:function(t){var e=this;jQuery.when(this.fireSave(t)).then(function(){e._close()})},_clear:function(t){var e=this;jQuery.when(this.fireClear(t)).then(function(){e._save()})},_close:function(){this.getContent().forEach(function(t){try{t.removeSelections()}catch(t){}});this._oSelectedObject={};this.close()},renderer:{}})});